(function(n){var r=function(){};var t=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};var i=Object.keys||function(n){var r=[];var t;for(t in n){if(n.hasOwnProperty(t)){r.push(t)}}return r};var u=Array.prototype.slice;var f=function(n,r){var u=t(n)?false:i(n);var f=(u||n).length;var a=-1;var e;if(u){while(++a<f){e=u[a];if(r(n[e],e,n)===false){break}}}else{while(++a<f){if(r(n[a],a,n)===false){break}}}};var a=function(n,u,f){var a=t(n)?false:i(n);var e=(a||n).length;var o=-1;var c;var l=0;var v=function(n){if(n){f(n);f=r;return}if(++l===e){f(null)}};if(!e){f(null);return}if(a){while(++o<e){c=a[o];u(v,n[c],c,n)}}else{while(++o<e){u(v,n[o],o,n)}}};var e=function(n,r,u){var f=t(n)?false:i(n);var a=(f||n).length;var e=0;var o;var c=function(n){if(n){u(n);return}if(++e===a){u(null);return}l()};var l=f?function(){o=f[e];r(c,n[o],o,n)}:function(){r(c,n[e],e,n)};if(!a){u(null);return}l()};var o=function(n,r){var i=t(n)?[]:{};f(n,function(n,t,u){i[t]=r(n,t,u)});return i};var c=function(n,r,i){var u=t(n)?[]:{};a(n,function(n,t,i,f){r(function(r,t){u[i]=t;n(r)},t,i,f)},function(n){i(n,u)})};var l=function(n,r){var i;if(t(n)){i=[];f(n,function(n,t,u){if(r(n,t,u)){i.push(n)}})}else{i={};f(n,function(n,t,u){if(r(n,t,u)){i[t]=n}})}return i};var v=function(n,r,i){var u;if(t(n)){u=[];a(n,function(n,t,i,f){r(function(r,f){if(f){u.push({i:i,val:t})}n(r)},t,i,f)},function(n){i(n,o(u.sort(function(n,r){return n.i-r.i}),function(n){return n.val}))})}else{u={};a(n,function(n,t,i,f){r(function(r,f){if(f){u[i]=t}n(r)},t,i,f)},function(n){i(n,u)})}};var s=function(n,r,t){f(n,function(n,i,u){r=t(r,n,i,u)});return r};var p=function(n,r,t,i){e(n,function(n,i,u,f){t(function(t,i){r=i;n(t)},r,i,u,f)},function(n){i(n,r)})};var h={};h.each=function(n,r,t){return t?a(n,r,t):f(n,r)};h.eachSeries=function(n,r,t){return t?e(n,r,t):f(n,r)};h.map=function(n,r,t){return t?c(n,r,t):o(n,r)};h.filter=function(n,r,t){return t?v(n,r,t):l(n,r)};h.fold=function(n,r,t,i){return i?p(n,r,t,i):s(n,r,t)};h.parallel=function(n,t){h.map(n,function(n,r){r(function(r,t){n(r,t)})},function(n,i){(t||r)(n,i)})};h.series=function(n,i){var u=t(n)?[]:{};e(n,function(n,r,t){r(function(r,i){u[t]=i;n(r)})},function(n){(i||r)(n,u)})};h.waterfall=function(n,f){var a=t(n)?false:i(n);var e=(a||n).length;var o=-1;var c=function(r){if(r){f(r);return}if(++o===e){f.apply(null,arguments);return}var t=u.call(arguments);t[0]=c;(a?n[a[o]]:n[o]).apply(null,t)};f=f||r;c()};if(typeof module==="object"){module.exports=h}else{n.savoy=h}})(this);