(function(n){var r=function(){};var t=function(n){return function(t,i,e){var f=t instanceof Array?[]:{};var a=t instanceof Array?0:Object.keys(t);var u=(a||t).length;var o=0;var c=function(t,i){if(t){e(t);e=r;return}n(i,f,this[0],this[1]);if(++o==u){e(0,f)}};if(!u){(e||r)(0,f);return f}var v=-1;while(++v<u){var l=a?a[v]:v;if(e){i(c.bind([l,t[l]]),t[l],l,t)}else{n(i(t[l],l,t),f,l,t[l])}}return f}};var i=function(n){return function(t,i,e,f){var a=t instanceof Array?0:Object.keys(t);var u=(a||t).length;var o=0;var c;var v=function(n,t){if(n){return f(n)}i=t;if(++o==u){(f||r)(0,i);return}l(t)};var l=function(r){c=a?a[o]:o;if(n){e(v,i,t[c],c,t)}else{t[c](v,r)}};if(!u){(f||r)(0,i);return i}if(n&&!f){o=-1;while(++o<u){c=a?a[o]:o;i=e(i,t[c],c,t)}return i}l()}};var e=i();n.each=t(r);n.filter=t(function(n,r,t,i){if(n){r[r instanceof Array?r.length:t]=i}});n.map=t(function(n,r,t){r[t]=n});n.fold=i(1);n.waterfall=function(n,r){return e(n,undefined,0,r)};n.parallel=function(t,i){n.map(t,function(n,r){r(function(r,t){n(r,t)})},function(n,t){(i||r)(n,t)})}})(typeof exports=="undefined"?this.s:exports);