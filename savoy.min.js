(function(n){var r=function(){};var t=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};var i=Object.keys||function(n){var r=[];var t;for(t in n){if(n.hasOwnProperty(t)){r.push(t)}}return r};var f=Array.prototype.slice;var u=function(n,r){var f=t(n)?false:i(n);var u=(f||n).length;var a=-1;var e;if(f){while(++a<u){e=f[a];if(r(n[e],e,n)===false){break}}}else{while(++a<u){if(r(n[a],a,n)===false){break}}}};var a=function(n,f,u){var a=t(n)?false:i(n);var e=(a||n).length;var o=-1;var c;var l=0;var v=function(n){if(n){u(n);u=r;return}if(++l===e){u(null)}};if(!e){u(null);return}if(a){while(++o<e){c=a[o];f(v,n[c],c,n)}}else{while(++o<e){f(v,n[o],o,n)}}};var e=function(n,r,f){var u=t(n)?false:i(n);var a=(u||n).length;var e=0;var o;var c=function(n){if(n){f(n);return}if(++e===a){f(null);return}l()};var l=u?function(){o=u[e];r(c,n[o],o,n)}:function(){r(c,n[e],e,n)};if(!a){f(null);return}l()};var o=function(n,r){var i=t(n)?[]:{};u(n,function(n,t,f){i[t]=r(n,t,f)});return i};var c=function(n,r,i){var f=t(n)?[]:{};a(n,function(n,t,i,u){r(function(r,t){f[i]=t;n(r)},t,i,u)},function(n){i(n,f)})};var l=function(n,r){var i;if(t(n)){i=[];u(n,function(n,t,f){if(r(n,t,f)){i.push(n)}})}else{i={};u(n,function(n,t,f){if(r(n,t,f)){i[t]=n}})}return i};var v=function(n,r,i){var f;if(t(n)){f=[];a(n,function(n,t,i,u){r(function(r,u){if(u){f.push({i:i,val:t})}n(r)},t,i,u)},function(n){i(n,o(f.sort(function(n,r){return n.i-r.i}),function(n){return n.val}))})}else{f={};a(n,function(n,t,i,u){r(function(r,u){if(u){f[i]=t}n(r)},t,i,u)},function(n){i(n,f)})}};var s=function(n,r,t){u(n,function(n,i,f){r=t(r,n,i,f)});return r};var p=function(n,r,t,i){e(n,function(n,i,f,u){t(function(t,i){r=i;n(t)},r,i,f,u)},function(n){i(n,r)})};n.each=function(n,r,t){return t?a(n,r,t):u(n,r)};n.map=function(n,r,t){return t?c(n,r,t):o(n,r)};n.filter=function(n,r,t){return t?v(n,r,t):l(n,r)};n.fold=function(n,r,t,i){return i?p(n,r,t,i):s(n,r,t)};n.parallel=function(t,i){n.map(t,function(n,r){r(function(r,t){n(r,t)})},function(n,t){(i||r)(n,t)})};n.series=function(n,i){var f=t(n)?[]:{};e(n,function(n,r,t){r(function(r,i){f[t]=i;n(r)})},function(n){(i||r)(n,f)})};n.waterfall=function(n,u){var a=t(n)?false:i(n);var e=(a||n).length;var o=-1;var c=function(r){if(r){u(r);return}if(++o===e){u.apply(null,arguments);return}var t=f.call(arguments);t[0]=c;(a?n[a[o]]:n[o]).apply(null,t)};u=u||r;c()}})(typeof exports=="undefined"?this.savoy:exports);